# UNIX Assignment 1

## Description

This shell script is intended to read and analyze parking infraction data tables from the Toronto Open Data Portal. The parking ticket data can be found at:

[Toronto Open Data Parking Tickets](https://open.toronto.ca/dataset/parking-tickets/)

The data are sorted by year, with one .zip file per year. Within each .zip file are .csv files that each contain 250,000 parking ticket records. One of these files from 2022 is in the `inputs` directory as a sample input.

The shell script in the `scripts` directory performs three operations on a parking ticket .csv file. The script:
1. identifies all unique types of parking infractions and prints them to standard output
1. computes the mean, minimum, and maximum fine amounts and prints these values to standard output
1. finds all tickets for parking within 3 metres of a fire hydrant and saves three columns of those records to a file named `blocking_fire_hydrants.csv` in the same directory as the source file

## Usage

The script must be run from a POSIX (UNIX, Linux, darwin, etc.) terminal with a bash shell. This can be on a computer running MacOS, POSIX flavour, or Windows with WSL2.

To run, download the script or clone this repository, navigate to the directory, and run the script with one command line parameter:

`./MSchumaker_unix_a1.sh <input file>`

From the same directory as this `README.md` file, you can run the script on the sample input by entering the following on the command line:

`./scripts/MSchumaker_unix_a1.sh ./inputs/Parking_Tags_Data_2022.005.csv`

The `<input file>` parameter requirements are described below.

### Input Parameter

The  `<input file>` parameter is the name of the parking infraction file to be read. A sample file is in the `inputs` directory of this repository. 

If only a file name is given (e.g. `Parking_Tags_Data_2022.005.csv`), the script will expect the file to be in the directory `$HOME/Desktop`. 

If a file name with leading `./` or `./<subdirectory>` is given, the script will expect the file to be at that path.

If a full path and file name is given, the file will be expected at that full path.

### Outputs

Sample outputs for the `Parking_Tags_Data_2022.005.csv` are in the `outputs` directory. The `unix_a1_standard_output.txt` file was generated by redirecting the standard output when running the script. The `blocking_fire_hydrants.csv` file was generated by the script directly.

## Functions

The script file contains six functions that are used by the main script. Their names, inputs, and outputs are as follows:

### `get_file_name`

#### Description
Given a string parameter containing a file name or path and file name, remove all characters up to and including the last "/".

#### Parameters
A string containing a file name or path and file name.

#### Output
A string of all characters after the last "/" sent to standard output.

### `get_path`

#### Description
Given a string parameter containing a file name or path and file name, remove all characters after the last "/".

#### Parameters
A string containing a file name or path and file name.

#### Output
A string of all characters up to and including the last "/" sent to standard output.

### `get_column_number`

#### Description
Given a string with the path and file name for a parking ticket .csv file and a column header within the file, outputs the column number corresponding to the header.

#### Parameters
1. A string containing the path and file name for a parking ticket .csv file.
1. The name of a column header in a parking ticket .csv file.

#### Output

The column number corresponding to the header sent to standard output.

### `print_infraction_types`

#### Description
Given a string with the path and file name for a parking ticket .csv file, outputs the unique types of parking infractions printed on separate lines on standard output.

#### Parameters
A string containing the path and file name for a parking ticket .csv file.

#### Output
The unique types of parking infractions printed on separate lines on standard output.

### `print_mean_min_max`

#### Description
Given a string with the path and file name for a parking ticket .csv file, outputs the mean, minimum, and maximum values in the "set_fine_amount" column, sent to standard output.

#### Parameters
1. A string containing the path and file name for a parking ticket .csv file.

#### Output
The mean, minimum, and maximum values in the "set_fine_amount" column, sent to standard output.

### `save_one_infraction_type`

#### Description
Takes four or more input parameters: a string with the path and file name for a parking ticket .csv file, a file name for output, a string containing a valid type of parking infraction, and the names of one or more columns. Outputs the rows for that parking infraction type and columns named in the positional parameters to the given output file.

#### Parameters
1. A string containing the path and file name for a parking ticket .csv file.
1. A string containing a file name for output.
1. A string with the name of a valid parking infraction type.
1. One or more input parameters with the names of columns.

#### Output
If it exists, overwrites the contents of the output file with the column headers, and appends rows corresponding to the input parking infraction type.

# Licensing Terms

The author, Michael Schumaker, claims copyright of this README.md file and the shell script in the Michael-Schumaker subfolder of assignment-2. It is made available under the terms of the permissive MIT License, with the assumption that its use will be consistent with academic integrity.

## MIT License

Copyright (c) 2023-2024 Michael Schumaker

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.